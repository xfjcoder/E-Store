{"ast":null,"code":"// client/src/actions/orderActions.js\n\nimport axios from \"axios\";\nimport { ORDER_CREATE_REQUEST, ORDER_CREATE_SUCCESS, ORDER_CREATE_FAIL, ORDER_DETAILS_REQUEST, ORDER_DETAILS_SUCCESS, ORDER_DETAILS_FAIL, ORDER_LIST_REQUEST, ORDER_LIST_SUCCESS, ORDER_LIST_FAIL, ORDER_UPDATE_STATUS_REQUEST, ORDER_UPDATE_STATUS_SUCCESS, ORDER_UPDATE_STATUS_FAIL } from \"../constants/orderConstants\";\nimport { CART_CLEAR_ITEMS } from \"../constants/cartConstants\";\n\n// Create order\nexport const createOrder = orderData => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: ORDER_CREATE_REQUEST\n    });\n    const {\n      auth: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.post(`${process.env.REACT_APP_API_URL}/orders`, orderData, config);\n    dispatch({\n      type: ORDER_CREATE_SUCCESS,\n      payload: data\n    });\n    dispatch({\n      type: CART_CLEAR_ITEMS\n    });\n    localStorage.removeItem(\"cartItems\");\n  } catch (error) {\n    dispatch({\n      type: ORDER_CREATE_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\n\n// Get order details\nexport const getOrderDetails = id => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: ORDER_DETAILS_REQUEST\n    });\n    const {\n      auth: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.get(`${process.env.REACT_APP_API_URL}/orders/${id}`, config);\n    dispatch({\n      type: ORDER_DETAILS_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: ORDER_DETAILS_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\n\n// List user orders\nexport const listUserOrders = () => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: ORDER_LIST_REQUEST\n    });\n    const {\n      auth: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.get(`${process.env.REACT_APP_API_URL}/orders`, config);\n    dispatch({\n      type: ORDER_LIST_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: ORDER_LIST_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\n\n// List all orders (owner only)\nexport const listAllOrders = () => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: ORDER_LIST_REQUEST\n    });\n    const {\n      auth: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.get(`${process.env.REACT_APP_API_URL}/admin/orders`, config);\n    dispatch({\n      type: ORDER_LIST_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: ORDER_LIST_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\n\n// Update order status (owner only)\nexport const updateOrderStatus = (id, status) => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: ORDER_UPDATE_STATUS_REQUEST\n    });\n    const {\n      auth: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.put(`${process.env.REACT_APP_API_URL}/admin/orders/${id}`, {\n      status\n    }, config);\n    dispatch({\n      type: ORDER_UPDATE_STATUS_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: ORDER_UPDATE_STATUS_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};","map":{"version":3,"names":["axios","ORDER_CREATE_REQUEST","ORDER_CREATE_SUCCESS","ORDER_CREATE_FAIL","ORDER_DETAILS_REQUEST","ORDER_DETAILS_SUCCESS","ORDER_DETAILS_FAIL","ORDER_LIST_REQUEST","ORDER_LIST_SUCCESS","ORDER_LIST_FAIL","ORDER_UPDATE_STATUS_REQUEST","ORDER_UPDATE_STATUS_SUCCESS","ORDER_UPDATE_STATUS_FAIL","CART_CLEAR_ITEMS","createOrder","orderData","dispatch","getState","type","auth","userInfo","config","headers","Authorization","token","data","post","process","env","REACT_APP_API_URL","payload","localStorage","removeItem","error","response","message","getOrderDetails","id","get","listUserOrders","listAllOrders","updateOrderStatus","status","put"],"sources":["C:/Users/End User/Documents/CSTU/CSE552 Full Stack Development/E-Commerce Project/estore-app/client/src/actions/orderActions.js"],"sourcesContent":["// client/src/actions/orderActions.js\r\n\r\nimport axios from \"axios\";\r\nimport {\r\n  ORDER_CREATE_REQUEST,\r\n  ORDER_CREATE_SUCCESS,\r\n  ORDER_CREATE_FAIL,\r\n  ORDER_DETAILS_REQUEST,\r\n  ORDER_DETAILS_SUCCESS,\r\n  ORDER_DETAILS_FAIL,\r\n  ORDER_LIST_REQUEST,\r\n  ORDER_LIST_SUCCESS,\r\n  ORDER_LIST_FAIL,\r\n  ORDER_UPDATE_STATUS_REQUEST,\r\n  ORDER_UPDATE_STATUS_SUCCESS,\r\n  ORDER_UPDATE_STATUS_FAIL,\r\n} from \"../constants/orderConstants\";\r\nimport { CART_CLEAR_ITEMS } from \"../constants/cartConstants\";\r\n\r\n// Create order\r\nexport const createOrder = (orderData) => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: ORDER_CREATE_REQUEST });\r\n\r\n    const {\r\n      auth: { userInfo },\r\n    } = getState();\r\n\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${userInfo.token}`,\r\n      },\r\n    };\r\n\r\n    const { data } = await axios.post(\r\n      `${process.env.REACT_APP_API_URL}/orders`,\r\n      orderData,\r\n      config\r\n    );\r\n\r\n    dispatch({\r\n      type: ORDER_CREATE_SUCCESS,\r\n      payload: data,\r\n    });\r\n\r\n    dispatch({\r\n      type: CART_CLEAR_ITEMS,\r\n    });\r\n\r\n    localStorage.removeItem(\"cartItems\");\r\n  } catch (error) {\r\n    dispatch({\r\n      type: ORDER_CREATE_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\n// Get order details\r\nexport const getOrderDetails = (id) => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: ORDER_DETAILS_REQUEST });\r\n\r\n    const {\r\n      auth: { userInfo },\r\n    } = getState();\r\n\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${userInfo.token}`,\r\n      },\r\n    };\r\n\r\n    const { data } = await axios.get(\r\n      `${process.env.REACT_APP_API_URL}/orders/${id}`,\r\n      config\r\n    );\r\n\r\n    dispatch({\r\n      type: ORDER_DETAILS_SUCCESS,\r\n      payload: data,\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: ORDER_DETAILS_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\n// List user orders\r\nexport const listUserOrders = () => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: ORDER_LIST_REQUEST });\r\n\r\n    const {\r\n      auth: { userInfo },\r\n    } = getState();\r\n\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${userInfo.token}`,\r\n      },\r\n    };\r\n\r\n    const { data } = await axios.get(\r\n      `${process.env.REACT_APP_API_URL}/orders`,\r\n      config\r\n    );\r\n\r\n    dispatch({\r\n      type: ORDER_LIST_SUCCESS,\r\n      payload: data,\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: ORDER_LIST_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\n// List all orders (owner only)\r\nexport const listAllOrders = () => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: ORDER_LIST_REQUEST });\r\n\r\n    const {\r\n      auth: { userInfo },\r\n    } = getState();\r\n\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${userInfo.token}`,\r\n      },\r\n    };\r\n\r\n    const { data } = await axios.get(\r\n      `${process.env.REACT_APP_API_URL}/admin/orders`,\r\n      config\r\n    );\r\n\r\n    dispatch({\r\n      type: ORDER_LIST_SUCCESS,\r\n      payload: data,\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: ORDER_LIST_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\n// Update order status (owner only)\r\nexport const updateOrderStatus = (id, status) => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: ORDER_UPDATE_STATUS_REQUEST });\r\n\r\n    const {\r\n      auth: { userInfo },\r\n    } = getState();\r\n\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${userInfo.token}`,\r\n      },\r\n    };\r\n\r\n    const { data } = await axios.put(\r\n      `${process.env.REACT_APP_API_URL}/admin/orders/${id}`,\r\n      { status },\r\n      config\r\n    );\r\n\r\n    dispatch({\r\n      type: ORDER_UPDATE_STATUS_SUCCESS,\r\n      payload: data,\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: ORDER_UPDATE_STATUS_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}